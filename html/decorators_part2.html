<!-- Auto generated by http://github.com/bcambel/pythonarticles at 2013-07-27 15:14:43.895919UTC-->
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:og="http://opengraphprotocol.org/schema/" xmlns:fb="http://www.facebook.com/2008/fbml" lang="en">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>Decorators - Part II</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta property="og:title" content="Decorators - Part II"/>
    <meta property="og:type" content="article"/>
    <meta property="og:url" content="http://pythonarticles.com/decorators_part2.html"/>
    <meta property="og:site_name" content="PythonArticles"/>
    <meta property="og:description" content="advanced python decorators, how to use decorators in different ways"/>
    <meta name="description" content="advanced python decorators, how to use decorators in different ways" />
    <meta name='keywords' content='python decorators, how to use python decorators, decorators example' />
    <link rel="alternate" type="application/rss+xml" title="PythonArticles RSS Feed" href="http://feeds.feedburner.com/PyArticles" />

    <link href="http://fonts.googleapis.com/css?family=Muli|Domine|Amaranth:400,700&subset=latin,latin-ext" rel="stylesheet" type="text/css">
    <!--link href="//netdna.bootstrapcdn.com/twitter-bootstrap/2.2.1/css/bootstrap-combined.min.css" rel="stylesheet"-->
    <link href="//netdna.bootstrapcdn.com/twitter-bootstrap/2.3.2/css/bootstrap-combined.no-icons.min.css" rel="stylesheet">
 	<!-- <link href="//netdna.bootstrapcdn.com/bootswatch/2.3.2/flatly/bootstrap-combined.min.css" rel='stylesheet' > -->
   <link href="//netdna.bootstrapcdn.com/font-awesome/2.0/css/font-awesome.css" rel="stylesheet">
   <link href="http://cdn-images.mailchimp.com/embedcode/slim-081711.css" rel="stylesheet" type="text/css">
    <link href="/static/css/app.css?v=17" rel="stylesheet">
    <link href="/static/css/pysegments.css?v=2" rel="stylesheet">
</head>
<body>


<div class="navbar">
    <div class="navbar-inner">
        <div class="container">
            <a class="brand" href="/">&nbsp;Python Articles&nbsp;</a>
            <ul class="nav">
                <li class=""><a href="/">Home</a></li>
                <li>
                    <a data-track='dict-main-menu' href='/python_dictionaries.html'> <i style='color:red' class='icon-fire'></i>&nbsp;Dictionaries</a>
                </li>
                <li class="dropdown">
                    <a class="dropdown-toggle" data-toggle="dropdown" href="#">Beginner<b class="caret"></b></a>
                    <ul class="dropdown-menu">
                        <li>
                            <a data-track='dict-begin-menu' href='/python_dictionaries.html'> <i style='color:red' class='icon-fire'></i>&nbsp;Dictionaries</a>
                        </li>
                        <li>
                            <a data-track='list-begin-menu' href='/python_lists.html'> Lists </a>
                        </li>

                        <li>
                            <a data-track='list_comp-begin-menu' href='/list_comprehension.html'> List Comprehension</a>
                        </li>
                    </ul>
                </li>
                <li class="dropdown">
                    <a class="dropdown-toggle" data-toggle="dropdown" href="#">Posts<b class="caret"></b></a>
                    <ul class="dropdown-menu">
                        
                        <li>
                            <a href="/decorators_part1.html" data-track='posts-decorators_part1'>
                                decorators part1
                            </a>
                        </li>
                        
                        <li>
                            <a href="/decorators_part2.html" data-track='posts-decorators_part2'>
                                decorators part2
                            </a>
                        </li>
                        
                        <li>
                            <a href="/generators.html" data-track='posts-generators'>
                                generators
                            </a>
                        </li>
                        
                        <li>
                            <a href="/introduction_to_flask.html" data-track='posts-introduction_to_flask'>
                                introduction to flask
                            </a>
                        </li>
                        
                        <li>
                            <a href="/itertools.html" data-track='posts-itertools'>
                                itertools
                            </a>
                        </li>
                        
                        <li>
                            <a href="/list_comprehension.html" data-track='posts-list_comprehension'>
                                list comprehension
                            </a>
                        </li>
                        
                        <li>
                            <a href="/mock.html" data-track='posts-mock'>
                                mock
                            </a>
                        </li>
                        
                        <li>
                            <a href="/python_dictionaries.html" data-track='posts-python_dictionaries'>
                                python dictionaries
                            </a>
                        </li>
                        
                        <li>
                            <a href="/python_lists.html" data-track='posts-python_lists'>
                                python lists
                            </a>
                        </li>
                        
                    </ul>
                </li>
                <li><a id='newsletter-link' href='#mc_embed_signup' data-toggle='modal' data-track='newsletter'>Newsletter</a></li>
                <li >
                    <a href="http://feeds.feedburner.com/PyArticles"><img src="http://feeds.feedburner.com/~fc/PyArticles?bg=99CCFF&amp;fg=444444&amp;anim=0" height="26" width="88" style="border:0" alt="" /></a>
                </li>
                <li style='margin-top:5px'>
 <a href="https://twitter.com/pythonhackers" class="twitter-follow-button" data-show-count="true" data-lang="en" data-size='large' >Follow @us</a>        
                </li>
            </ul>
        </div>
    </div>
</div>
    <div class="container-fluid main-content">
        
        <div class='span12 row-fluid' style='margin-left:0px;'>
        
<div class='span2' id='left-menu'>
    
            <ul style='list-style-type:none;margin-left:3px;padding-left:3px;'>

            </ul>
            <hr />
            <a href="https://twitter.com/share" class="twitter-share-button" data-via="bahadircambel" data-size="large" data-related="pythonhackers">Tweet</a>
</div>
<div class="span10" >
<article id="content_html" >
    <span class='pull-right article_date'>2013-07-15</span>
    <span class='pull-right badge badge-info'>intermediate</span>
     
            <span class='pull-right badge badge-warning'>decorator</span>
            
    <h1>Decorators - Part II</h1>

<p>In the <a href="http://pythonarticles.com/decorators_part1.html">part 1</a>, we described the most basic usage of the decorators. Decorators are functions that intercepts the actual implementation
and do something. Remember that functions are first class citizens(objects) in Python.</p>

<p>Fire up your favorite terminal, navigate to code directory and initialize python; start typing </p>

<div class="syntax"><pre><code><span class="o">&gt;&gt;&gt;</span> <span class="kn">from</span> <span class="nn">ver2</span> <span class="kn">import</span> <span class="o">*</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">original_int</span> <span class="o">=</span> <span class="nb">int</span>
<span class="o">&gt;&gt;&gt;</span> <span class="nd">@intercept_me</span>
<span class="o">...</span> <span class="k">def</span> <span class="nf">int</span><span class="p">(</span><span class="n">value</span><span class="p">):</span>
<span class="o">...</span>     <span class="n">logging</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s">&quot;Overwritten integer function is here :)&quot;</span><span class="p">)</span>
<span class="o">...</span>     <span class="n">res</span> <span class="o">=</span> <span class="n">original_int</span><span class="p">(</span> <span class="n">value</span> <span class="p">)</span>
<span class="o">...</span>     <span class="k">return</span> <span class="n">res</span>
<span class="o">...</span> 
<span class="o">&gt;&gt;&gt;</span> <span class="nb">int</span><span class="p">(</span><span class="mi">10000</span><span class="p">)</span>
<span class="p">[</span><span class="mi">2013</span><span class="o">-</span><span class="mo">07</span><span class="o">-</span><span class="mi">09</span> <span class="mi">20</span><span class="p">:</span><span class="mi">11</span><span class="p">:</span><span class="mi">09</span><span class="p">,</span><span class="mi">906</span><span class="p">](</span><span class="n">ver2</span><span class="o">.</span><span class="n">py</span><span class="c">#20)DEBUG   Starting capturing the time of the executing &#39;int&#39;</span>
<span class="p">[</span><span class="mi">2013</span><span class="o">-</span><span class="mo">07</span><span class="o">-</span><span class="mi">09</span> <span class="mi">20</span><span class="p">:</span><span class="mi">11</span><span class="p">:</span><span class="mi">09</span><span class="p">,</span><span class="mi">906</span><span class="p">](</span><span class="o">&lt;</span><span class="n">stdin</span><span class="o">&gt;</span><span class="c">#3)INFO    Overwritten integer function is here :)</span>
<span class="p">[</span><span class="mi">2013</span><span class="o">-</span><span class="mo">07</span><span class="o">-</span><span class="mi">09</span> <span class="mi">20</span><span class="p">:</span><span class="mi">11</span><span class="p">:</span><span class="mi">09</span><span class="p">,</span><span class="mi">907</span><span class="p">](</span><span class="n">ver2</span><span class="o">.</span><span class="n">py</span><span class="c">#25)DEBUG   Function: [int] =&gt; Took [0:00:00.000226]</span>
<span class="mi">10000</span>
<span class="o">&gt;&gt;&gt;</span> <span class="nb">int</span><span class="p">(</span><span class="s">&quot;231232&quot;</span><span class="p">)</span>
<span class="p">[</span><span class="mi">2013</span><span class="o">-</span><span class="mo">07</span><span class="o">-</span><span class="mi">09</span> <span class="mi">20</span><span class="p">:</span><span class="mi">11</span><span class="p">:</span><span class="mi">15</span><span class="p">,</span><span class="mi">875</span><span class="p">](</span><span class="n">ver2</span><span class="o">.</span><span class="n">py</span><span class="c">#20)DEBUG   Starting capturing the time of the executing &#39;int&#39;</span>
<span class="p">[</span><span class="mi">2013</span><span class="o">-</span><span class="mo">07</span><span class="o">-</span><span class="mi">09</span> <span class="mi">20</span><span class="p">:</span><span class="mi">11</span><span class="p">:</span><span class="mi">15</span><span class="p">,</span><span class="mi">876</span><span class="p">](</span><span class="o">&lt;</span><span class="n">stdin</span><span class="o">&gt;</span><span class="c">#3)INFO    Overwritten integer function is here :)</span>
<span class="p">[</span><span class="mi">2013</span><span class="o">-</span><span class="mo">07</span><span class="o">-</span><span class="mi">09</span> <span class="mi">20</span><span class="p">:</span><span class="mi">11</span><span class="p">:</span><span class="mi">15</span><span class="p">,</span><span class="mi">876</span><span class="p">](</span><span class="n">ver2</span><span class="o">.</span><span class="n">py</span><span class="c">#25)DEBUG   Function: [int] =&gt; Took [0:00:00.000315]</span>
<span class="mi">231232</span>
<span class="o">&gt;&gt;&gt;</span> 
</code></pre></div>

<p>Python builtin function <strong>int</strong> overriden at the above code, and we redefined the int function. Now, whenever you call
the int function, our decorator will take presedance and calculate the performance of the integer. Be aware that
this is not a good way to time execution of a program or function, but think of it is as a informant.</p>

<h2>Implement decorator via a class</h2>

<div class="syntax"><pre><code><span class="kn">import</span> <span class="nn">logging</span>
<span class="kn">import</span> <span class="nn">random</span>
<span class="kn">from</span> <span class="nn">datetime</span> <span class="kn">import</span> <span class="n">datetime</span> <span class="k">as</span> <span class="n">dt</span>
<span class="kn">import</span> <span class="nn">time</span>

<span class="n">logging</span><span class="o">.</span><span class="n">basicConfig</span><span class="p">(</span><span class="n">format</span><span class="o">=</span><span class="s">&#39;[</span><span class="si">%(asctime)s</span><span class="s">](</span><span class="si">%(filename)s</span><span class="s">#</span><span class="si">%(lineno)d</span><span class="s">)</span><span class="si">%(levelname)-7s</span><span class="s"> </span><span class="si">%(message)s</span><span class="s">&#39;</span><span class="p">,</span>
                    <span class="n">level</span><span class="o">=</span><span class="n">logging</span><span class="o">.</span><span class="n">NOTSET</span><span class="p">)</span>

<span class="k">class</span> <span class="nc">intercept_me</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
   <span class="k">def</span> <span class="nf">__init__</span> <span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">func</span><span class="p">):</span>
      <span class="bp">self</span><span class="o">.</span><span class="n">func</span> <span class="o">=</span> <span class="n">func</span>
      <span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="nb">id</span><span class="p">(</span><span class="bp">self</span><span class="p">))</span>

   <span class="k">def</span> <span class="nf">__call__</span> <span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
      <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">func</span> <span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>

<span class="nd">@intercept_me</span>
<span class="k">def</span> <span class="nf">some_slow_function</span><span class="p">():</span>
    <span class="n">logging</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s">&quot;Will sleep a bit..&quot;</span><span class="p">)</span>
    <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">1</span><span class="o">+</span> <span class="nb">int</span><span class="p">((</span><span class="n">random</span><span class="o">.</span><span class="n">random</span><span class="p">()</span><span class="o">*</span><span class="mi">10</span><span class="p">)</span><span class="o">%</span><span class="mi">5</span><span class="p">))</span>
    <span class="k">return</span> <span class="s">&#39;boohoo&#39;</span>

<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">2</span><span class="p">):</span>
    <span class="n">logging</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s">&quot;{0} Starting iter {1}{0}&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="mi">20</span><span class="o">*</span><span class="s">&quot;=&quot;</span><span class="p">,</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">))</span>
    <span class="n">logging</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="n">some_slow_function</span><span class="p">())</span>

<span class="n">logging</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s">&quot;done&quot;</span><span class="p">)</span>
</code></pre></div>

<p>will result in the following output in your console. As you see, the constructor of our class is only called one time,
which means that the class is initialized only one time.</p>

<pre><code>[2013-07-09 21:05:07,815](dec_via_class.py#12)DEBUG   4300575376
[2013-07-09 21:05:07,815](dec_via_class.py#24)INFO    ==================== Starting iter 1====================
[2013-07-09 21:05:07,815](dec_via_class.py#19)INFO    Will sleep a bit..
[2013-07-09 21:05:10,816](dec_via_class.py#25)INFO    boohoo
[2013-07-09 21:05:10,816](dec_via_class.py#24)INFO    ==================== Starting iter 2====================
[2013-07-09 21:05:10,816](dec_via_class.py#19)INFO    Will sleep a bit..
[2013-07-09 21:05:13,817](dec_via_class.py#25)INFO    boohoo
[2013-07-09 21:05:13,817](dec_via_class.py#27)INFO    done
</code></pre>


    <hr />
    <a href="https://twitter.com/share" class="twitter-share-button" data-lang="en" data-related="bahadircambel: Entreprenership 'n Programming " data-text='Decorators - Part II'>Tweet</a>
    <a href="http://news.ycombinator.com/submit" class="hn-share-button">Vote on HN</a>
    
    <div class="g-plusone" data-annotation="inline" data-width="200"></div>
</article>
</div>

        </div>
       <!--  <div class='span2'>
            <ul class='socialism' style='height:130px;'>
                <li>
                   
                </li>
                <li>
                    <div class="g-plusone" data-annotation="inline" data-width="150" data-href="http://pythonarticles.com"></div>        
                </li>
                <li>
                    <div class="fb-like" data-href="http://facebook.com/pythonhackers" data-send="false" data-layout="button_count" data-width="50" data-show-faces="false" data-font="lucida grande"></div>            
                </li>
            </ul>
            <hr />

            
        </div> -->

</div>
<div class="container-fluid">
        <div id="disqus_thread"></div>

        <hr />

        <div class="footer">
            <i class="icon-github"></i>&nbsp;<a href="https://github.com/bcambel/pythonarticles">GitHub</a> /
            <i class="icon-twitter"></i>&nbsp;<a href="http://twitter.com/bahadircambel">Twitter</a> /
            <i class="icon-envelope-alt"></i>&nbsp;<a href="mailto:pyhackers@gmail.com">E-Mail</a>
        <br />
        &copy; Copyright 2013 pythonarticles.com. Made in Amsterdam with <span style='color:red'><i class='icon-heart'></i></span>&nbsp;by <a href='http://blog.bahadir.io'>Bahadir Cambel</a>
        <a href="http://mixpanel.com/f/partner"><img src="http://mixpanel.com/site_media/images/partner/badge_blue.png" alt="Mobile Analytics" /></a>
        </div>
    </div>
<div id="fb-root"></div>

<script type="text/javascript">
    var disqus_shortname = 'pythonarticles';

    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>

<script type="text/javascript" src="//ajax.googleapis.com/ajax/libs/jquery/2.0.2/jquery.min.js"></script>
<script src="//netdna.bootstrapcdn.com/twitter-bootstrap/2.3.2/js/bootstrap.min.js"></script>
<script type="text/javascript" src="/static/js/jquery.masonry.js"></script>
<script src="/static/js/app.js?v=3" type='text/javascript'></script>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-42128994-3', 'pythonarticles.com');
  ga('send', 'pageview');
    (function(d, t) {
        var g = d.createElement(t),
                s = d.getElementsByTagName(t)[0];
        g.src = '//hnbutton.appspot.com/static/hn.min.js';g.async=true;
        s.parentNode.insertBefore(g, s);
    }(document, 'script'));


(function(){var uv=document.createElement('script');uv.type='text/javascript';uv.async=true;uv.src='//widget.uservoice.com/yoGOBbGbUSIe4CqP5RFA.js';var s=document.getElementsByTagName('script')[0];s.parentNode.insertBefore(uv,s)})();

UserVoice = window.UserVoice || [];
UserVoice.push(['showTab', 'classic_widget', {
  mode: 'full',
  primary_color: '#cc6d00',
  link_color: '#007dbf',
  default_mode: 'support',
  forum_id: 215760,
  tab_label: '?',
  tab_color: '#cc6d00',
  tab_position: 'bottom-left',
  tab_inverted: false
}]);

  (function() {
    var po = document.createElement('script'); po.type = 'text/javascript'; po.async = true;
    po.src = 'https://apis.google.com/js/plusone.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(po, s);
  })();
(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) return;
  js = d.createElement(s); js.id = id;js.async=true;
  js.src = "//connect.facebook.net/en_US/all.js#xfbml=1&appId=572493392790094";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));

!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.asyn=true;js.src="//platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");

(function(e,b){if(!b.__SV){var a,f,i,g;window.mixpanel=b;a=e.createElement("script");a.type="text/javascript";a.async=!0;a.src=("https:"===e.location.protocol?"https:":"http:")+'//cdn.mxpnl.com/libs/mixpanel-2.2.min.js';f=e.getElementsByTagName("script")[0];f.parentNode.insertBefore(a,f);b._i=[];b.init=function(a,e,d){function f(b,h){var a=h.split(".");2==a.length&&(b=b[a[0]],h=a[1]);b[h]=function(){b.push([h].concat(Array.prototype.slice.call(arguments,0)))}}var c=b;"undefined"!==
typeof d?c=b[d]=[]:d="mixpanel";c.people=c.people||[];c.toString=function(b){var a="mixpanel";"mixpanel"!==d&&(a+="."+d);b||(a+=" (stub)");return a};c.people.toString=function(){return c.toString(1)+".people (stub)"};i="disable track track_pageview track_links track_forms register register_once alias unregister identify name_tag set_config people.set people.set_once people.increment people.append people.track_charge people.clear_charges people.delete_user".split(" ");for(g=0;g<i.length;g++)f(c,i[g]);
b._i.push([a,e,d])};b.__SV=1.2}})(document,window.mixpanel||[]);

mixpanel.init("7d8f64c3d8511ad00480e190d32bdc3c"); 

// mixpanel.track_links(".nav", "Clicked Nav Link");
// mixpanel.track_links("article", "Article Link");
mixpanel.track_links("#footer", "Footer Link");

mixpanel.track_links('newsletter-link', "Newsletter Popup");
mixpanel.track_forms("#mc-embedded-subscribe-form", "Newsletter Form");
/* end Mixpanel */
</script>
<!-- Begin MailChimp Signup Form -->
<div class="modal hide fade" id="mc_embed_signup">
	<form action="http://pythonarticles.us7.list-manage.com/subscribe/post?u=ec40ca305ad5132552f8666a7&amp;id=9a8469ed7f" method="post" id="mc-embedded-subscribe-form" name="mc-embedded-subscribe-form" class="validate" target="_blank" novalidate>
  <div class="modal-header">
    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
    <h3>Subscribe to weekly newsletter</h3>
  </div>
  <div class="modal-body">
    
	<label for="mce-EMAIL">Subscribe to our mailing list</label>
	<input type="email" value="" name="EMAIL" class="email" id="mce-EMAIL" placeholder="email address" required>

  </div>
  <div class="modal-footer">
    <a href="#" class="btn pull-left">Close</a>
    <input type="submit" value="Subscribe" name="subscribe" id="mc-embedded-subscribe" class="btn btn-primary">
  </div>
  </form>
</div>
<!--End mc_embed_signup-->
</body>
</html>